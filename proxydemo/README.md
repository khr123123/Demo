Java åŠ¨æ€ä»£ç†ä¸‰ç§å®žçŽ°æ–¹å¼æ€»ç»“ï¼ˆJDKã€CGLIBã€Javassistï¼‰
åœ¨ Java ä¸­ï¼ŒåŠ¨æ€ä»£ç†æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡ã€æ‹¦æˆªæ–¹æ³•è°ƒç”¨å¹¶æ·»åŠ å¢žå¼ºé€»è¾‘çš„æŠ€æœ¯ã€‚MyBatisã€Spring AOP ç­‰æ¡†æž¶éƒ½å¤§é‡ä½¿ç”¨äº†åŠ¨æ€ä»£ç†æœºåˆ¶ã€‚å¸¸è§å®žçŽ°æ–¹å¼æœ‰ä¸‰ç§ï¼š

ä¸€ã€JDK åŠ¨æ€ä»£ç†
ðŸ“Œ æ ¸å¿ƒç‰¹ç‚¹
Java åŽŸç”Ÿæ”¯æŒï¼Œæ— éœ€ç¬¬ä¸‰æ–¹åº“ã€‚

åªèƒ½ä»£ç† æŽ¥å£ï¼Œä¸èƒ½ä»£ç†æ™®é€šç±»ã€‚

åŸºäºŽ java.lang.reflect.Proxy å’Œåå°„æœºåˆ¶ã€‚

å®žçŽ°ç®€å•ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒä½Žã€‚

âœ… é€‚ç”¨åœºæ™¯
æœåŠ¡æˆ–ç»„ä»¶ä»¥æŽ¥å£æ–¹å¼å¯¹å¤–æš´éœ²ã€‚

å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºåˆã€‚

å¦‚ï¼šMyBatis çš„ Mapper æŽ¥å£ä»£ç†ã€Spring AOP é»˜è®¤ä½¿ç”¨ï¼ˆJDK ä¼˜å…ˆï¼‰ã€‚

äºŒã€CGLIB åŠ¨æ€ä»£ç†
ðŸ“Œ æ ¸å¿ƒç‰¹ç‚¹
å¯ä»¥ä»£ç† ç±»ï¼Œä¹Ÿå¯ä»¥ä»£ç†å®žçŽ°äº†æŽ¥å£çš„ç±»ã€‚

åŸºäºŽç»§æ‰¿ä¸Žå­—èŠ‚ç å¢žå¼ºï¼ˆä½¿ç”¨ ASM åº“ï¼‰ã€‚

è¢«ä»£ç†ç±»ä¸èƒ½æ˜¯ final ç±»ï¼Œä»£ç†æ–¹æ³•ä¹Ÿä¸èƒ½æ˜¯ final æ–¹æ³•ã€‚

Spring åœ¨æ²¡æœ‰æŽ¥å£æ—¶é»˜è®¤ä½¿ç”¨ CGLIBã€‚

âœ… é€‚ç”¨åœºæ™¯
æ— æ³•ä¿®æ”¹ç›®æ ‡ç±»å®šä¹‰ä¸ºæŽ¥å£æ—¶ã€‚

éœ€è¦å¯¹ç±»æ–¹æ³•è¿›è¡Œå¢žå¼ºæ—¶ã€‚

æ¯” JDK Proxy æ€§èƒ½æ›´ä¼˜ï¼ˆä½†åˆ›å»ºä»£ç†ç±»è€—æ—¶ç•¥é«˜ï¼‰ã€‚

ä¸‰ã€Javassist åŠ¨æ€ä»£ç†
ðŸ“Œ æ ¸å¿ƒç‰¹ç‚¹
åŸºäºŽå­—èŠ‚ç ç¼–è¾‘ï¼ˆåº•å±‚ä½¿ç”¨ ASMï¼‰ã€‚

å¯ä»¥åŠ¨æ€ç”Ÿæˆç±»ï¼Œä¹Ÿå¯ä»£ç†æŽ¥å£æˆ–ç±»ã€‚

çµæ´»æ€§å¼ºï¼Œå¯ç›´æŽ¥æ‹¼æŽ¥æ–¹æ³•ä½“å­—ç¬¦ä¸²æˆ–æ“ä½œå­—èŠ‚ç ç»“æž„ã€‚

æ€§èƒ½ä¼˜äºŽ JDK Proxyï¼Œç•¥ä½ŽäºŽ CGLIBï¼Œä½†åŠŸèƒ½æ›´åº•å±‚å¯æŽ§ã€‚

âœ… é€‚ç”¨åœºæ™¯
é«˜æ€§èƒ½ã€é«˜çµæ´»æ€§çš„åœºåˆã€‚

æ¡†æž¶çº§å¼€å‘ï¼Œéœ€è¦æŽ§åˆ¶å­—èŠ‚ç ç»“æž„ã€‚

å¦‚ï¼šMyBatis çš„ä»£ç†ç±»åœ¨ä½Žç‰ˆæœ¬ä¸­å¯ä½¿ç”¨ Javassist å®žçŽ°ã€‚

ðŸ” ä¸‰è€…å¯¹æ¯”è¡¨
| ç‰¹æ€§        | JDK Proxy          | CGLIB        | Javassist          |
| --------- | ------------------ | ------------ | ------------------ |
| æ˜¯å¦ä¾èµ–ä¸‰æ–¹åº“   | å¦                  | æ˜¯ï¼ˆéœ€å¼•å…¥ CGLIBï¼‰ | æ˜¯ï¼ˆéœ€å¼•å…¥ Javassistï¼‰   |
| èƒ½å¦ä»£ç†ç±»     | å¦ï¼ˆä»…é™æŽ¥å£ï¼‰            | æ˜¯            | æ˜¯                  |
| å®žçŽ°æ–¹å¼      | åå°„                 | ç»§æ‰¿ + å­—èŠ‚ç å¢žå¼º   | ç›´æŽ¥ç¼–è¾‘å­—èŠ‚ç             |
| è¢«ä»£ç†ç±»é™åˆ¶    | æ—                   | ç±»ä¸èƒ½ä¸º final   | ç±»ä¸èƒ½ä¸º final         |
| æ€§èƒ½ï¼ˆæ–¹æ³•è°ƒç”¨æ—¶ï¼‰ | æ…¢                  | å¿«            | ä¸­ç­‰                 |
| çµæ´»æ€§       | ä½Ž                  | ä¸­            | é«˜                  |
| å¸¸è§ä½¿ç”¨åœºæ™¯    | æ™®é€šæŽ¥å£æœåŠ¡             | Spring æ— æŽ¥å£ä»£ç† | è‡ªå®šä¹‰ä»£ç†ã€æ¡†æž¶åº•å±‚         |
| å¸¸è§æ¡†æž¶åº”ç”¨    | MyBatisã€Spring AOP | Spring AOP   | MyBatisã€Hibernateç­‰ |


âœ… æ€»ç»“æŽ¨è
| ä½¿ç”¨éœ€æ±‚           | æŽ¨èæ–¹å¼                          |
| -------------- | ----------------------------- |
| é¡¹ç›®ä¸­éƒ½æ˜¯æŽ¥å£ï¼Œè¿½æ±‚ç®€å•   | JDK Proxy                     |
| æ— æ³•ä½¿ç”¨æŽ¥å£ï¼Œéœ€è¦ä»£ç†æ™®é€šç±» | CGLIB                         |
| æ¡†æž¶å¼€å‘ï¼Œéœ€è¦å­—èŠ‚ç ç¼–è¾‘èƒ½åŠ› | Javassist                     |
| å…³æ³¨æ€§èƒ½ï¼Œæ–¹æ³•è°ƒç”¨é¢‘ç¹    | CGLIB > Javassist > JDK Proxy |

